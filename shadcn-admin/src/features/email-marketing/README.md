# Email Marketing Feature

Функциональность для управления AI-генерируемыми письмами в системе RUELIQ.

## Структура

```
email-marketing/
├── components/
│   ├── email-columns.tsx        # Определение колонок таблицы писем
│   ├── email-dialogs.tsx        # Диалоги создания/редактирования/генерации
│   └── email-row-actions.tsx    # Действия в строках таблицы
├── hooks/
│   └── useEmailMarketing.ts     # API хуки для работы с письмами
├── pages/
│   └── EmailMarketingPage.tsx   # Главная страница email маркетинга
├── types.ts                     # TypeScript типы
├── index.tsx                    # Экспорты модуля
└── README.md                    # Документация
```

## Основные возможности

### 1. Управление письмами
- **Просмотр списка** - таблица с пагинацией, поиском и фильтрацией
- **Создание писем** - форма для ручного создания письма
- **Редактирование** - изменение темы, содержания и статуса
- **Удаление** - удаление письма с подтверждением

### 2. AI генерация
- **Генерация писем** - создание писем с помощью ИИ
- **Настройка тона** - формальный, дружелюбный, профессиональный, неформальный
- **Выбор цели** - знакомство, предложение, повторное обращение, информационное, приглашение
- **Контекст** - дополнительная информация для генерации

### 3. Отправка и статусы
- **Статусы писем**: черновик, отправлено, доставлено, ошибка, архив
- **Отправка** - отправка черновиков
- **Архивирование** - перенос в архив

### 4. Вложения
- **Добавление файлов** - загрузка вложений к письмам
- **Управление** - просмотр и удаление вложений

## API Endpoints

Подключается к backend endpoints:
- `GET /email-marketing/ai-emails/` - список писем
- `POST /email-marketing/ai-emails/` - создание письма
- `GET /email-marketing/ai-emails/{id}/` - получение письма
- `PATCH /email-marketing/ai-emails/{id}/` - обновление письма
- `DELETE /email-marketing/ai-emails/{id}/` - удаление письма
- `POST /email-marketing/ai-emails/generate/` - генерация AI письма
- `POST /email-marketing/ai-emails/{id}/send/` - отправка письма
- `POST /email-marketing/attachments/` - загрузка вложения
- `DELETE /email-marketing/attachments/{id}/` - удаление вложения

## Навигация

Добавлено в боковое меню для ролей:
- **Администратор** - полный доступ
- **Менеджер по продажам** - доступ к своим письмам

Маршрут: `/email-marketing`

## Используемые технологии

- **React** + **TypeScript**
- **TanStack Router** - маршрутизация
- **TanStack Query** - управление состоянием и кэширование API
- **React Hook Form** + **Zod** - формы и валидация
- **Shadcn/ui** - UI компоненты
- **Lucide React** + **Tabler Icons** - иконки
- **date-fns** - работа с датами

## Стилизация

Использует единый дизайн-система приложения:
- **Цветовая схема** - следует темной/светлой теме
- **Компоненты** - переиспользует UI компоненты
- **Типографика** - единые стили текста
- **Отступы и размеры** - консистентные интервалы

## Будущие улучшения

- [ ] Шаблоны писем
- [ ] Массовая отправка
- [ ] Статистика открытий
- [ ] A/B тестирование
- [ ] Интеграция с календарем
- [ ] Автоматические последовательности